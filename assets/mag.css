/* ========== Base & Scale ========== */
*,*::before,*::after{box-sizing:border-box}
html,body{height:100%}
:root{ --s-1:8px; --s-2:12px; --s-3:16px; --s-4:24px; --s-5:32px; --s-6:48px; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:"Cairo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; text-rendering:optimizeLegibility;
}
h1,h2,h3,h4{font-family:"Amiri", serif}
a{color:inherit; text-decoration:none}
img{max-width:100%; height:auto; display:block; border-radius:12px; border:1px solid var(--line)}
.container{width:min(1140px,92%); margin-inline:auto}
.stack > * + *{margin-top:var(--s-2)}
.muted{color:var(--muted)}
.section{padding:var(--s-6) 0}
.section-title{display:flex; align-items:center; justify-content:space-between; gap:var(--s-2); margin-bottom:var(--s-3)}
.section-title h2{margin:0; font-size:clamp(22px,3.2vw,30px)}
.grid{display:grid; gap:var(--s-3)}
.grid.cards-3{grid-template-columns:repeat(1,minmax(0,1fr))}
@media(min-width:760px){.grid.cards-3{grid-template-columns:repeat(3,minmax(0,1fr))}}
.actions{display:flex; justify-content:center; margin-top:var(--s-3)}
.list{list-style:none; padding:0; margin:var(--s-2) 0 0}

/* ========== Theme: Sand & Ink (NEW) ========== */
html{
  --radius:12px;
  --shadow-1:0 6px 16px rgba(0,0,0,.06);
  --speed-fast:150ms; --speed:260ms; --speed-slow:700ms;

  --bg:#faf7f2; --surface:#ffffff; --elev:#ffffff;
  --line:#e9e2d7; --text:#1f2937; --muted:#6b7280;

  --primary:#c4553f; --primary-2:#ff9a76; /* clay */
  color-scheme:light; scroll-behavior:smooth;
}
html[data-theme="dark"]{
  --bg:#0e0d0b; --surface:#13120f; --elev:#171612;
  --line:#2a2721; --text:#f4efe7; --muted:#b7b0a6;
  --primary:#ff8f70; --primary-2:#ffc1ae;
  color-scheme:dark;
}

/* Accent variants */
html[data-accent="clay"]{--primary:#c4553f; --primary-2:#ff9a76}
html[data-accent="cobalt"]{--primary:#2563eb; --primary-2:#22d3ee}
html[data-accent="forest"]{--primary:#0f766e; --primary-2:#10b981}
html[data-accent="amber"]{--primary:#b45309; --primary-2:#f59e0b}
html[data-accent="violet"]{--primary:#7c3aed; --primary-2:#a78bfa}

/* ========== Header ========== */
.site-header{position:sticky; top:0; z-index:60; background:var(--surface); border-bottom:1px solid var(--line)}
.header-inner{display:flex; align-items:center; justify-content:space-between; gap:var(--s-2); padding:12px 0}
.logo{display:inline-flex; align-items:center; gap:10px; font-weight:800}
.logo .mark{width:22px; height:22px; border-radius:5px; background:linear-gradient(135deg, var(--primary), var(--primary-2))}
.primary-nav{display:flex; gap:10px}
.primary-nav a{padding:8px 10px; border-radius:8px; color:var(--muted)}
.primary-nav a:hover{color:var(--text); background:color-mix(in oklab, var(--surface) 70%, transparent)}
.header-actions{display:flex; align-items:center; gap:var(--s-2)}
.search{display:flex; align-items:center; background:var(--elev); border:1px solid var(--line); border-radius:999px; padding:4px}
.search-input{border:none; outline:none; background:transparent; padding:6px 10px; color:var(--text); min-width:160px}
.search-btn{border:none; background:var(--elev); color:var(--text); border-radius:999px; padding:6px 10px; cursor:pointer}
.hamburger{display:none; background:transparent; border:none; width:36px; height:32px; position:relative}
.hamburger span{position:absolute; inset-inline:6px; height:2px; background:var(--text); border-radius:2px; transition:transform var(--speed), opacity var(--speed)}
.hamburger span:nth-child(1){top:8px}
.hamburger span:nth-child(2){top:15px}
.hamburger span:nth-child(3){top:22px}
@media(max-width:980px){
  .primary-nav{display:none; position:absolute; top:60px; inset-inline:0; background:var(--surface); border-bottom:1px solid var(--line); padding:10px; flex-direction:column; gap:8px}
  .hamburger{display:inline-block}
  .primary-nav.show{display:flex}
}

/* ========== Appearance menu (pro) ========== */
.theme-wrap{position:relative}
.theme-menu-btn{width:38px; height:38px; border-radius:8px; border:1px solid var(--line); background:var(--elev); display:grid; place-items:center; cursor:pointer; transition:transform var(--speed-fast), background var(--speed)}
.theme-menu-btn:hover{transform:translateY(-1px)}
.theme-menu-btn .icon{width:18px; height:18px; color:var(--text); position:absolute; opacity:0; transition:opacity var(--speed), transform var(--speed)}
html[data-theme="light"] .theme-menu-btn .sun{opacity:1}
html[data-theme="dark"] .theme-menu-btn .moon{opacity:1}
.theme-menu{position:absolute; inset:auto 0 0 auto; transform:translateY(calc(100% + 8px)); min-width:220px; background:var(--surface); border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow-1); padding:8px; display:none}
.theme-menu.open{display:block}
.theme-menu .group{padding:6px 6px 10px}
.theme-menu .label{font-size:.85rem; color:var(--muted); margin-bottom:6px}
.theme-menu .item{width:100%; text-align:inherit; padding:8px 10px; border:none; background:transparent; color:var(--text); border-radius:8px; cursor:pointer; display:flex; align-items:center; justify-content:space-between}
.theme-menu .item[aria-checked="true"]{background:color-mix(in oklab, var(--surface) 70%, transparent); font-weight:700}
.accents{display:flex; gap:8px}
.swatch{width:22px; height:22px; border-radius:6px; border:1px solid var(--line); cursor:pointer}
.swatch[data-accent="clay"]{background:linear-gradient(135deg,#c4553f,#ff9a76)}
.swatch[data-accent="cobalt"]{background:linear-gradient(135deg,#2563eb,#22d3ee)}
.swatch[data-accent="forest"]{background:linear-gradient(135deg,#0f766e,#10b981)}
.swatch[data-accent="amber"]{background:linear-gradient(135deg,#b45309,#f59e0b)}
.swatch[data-accent="violet"]{background:linear-gradient(135deg,#7c3aed,#a78bfa)}

/* ========== Sheets (uniform cards) ========== */
.sheet{background:var(--surface); border:1px solid var(--line); border-radius:var(--radius); overflow:hidden; transition:border-color var(--speed), transform var(--speed)}
.sheet:hover{transform:translateY(-2px); border-color:color-mix(in oklab, var(--primary) 25%, var(--line))}
.sheet .meta,.sheet .info{padding:var(--s-3)}
.sheet .title{margin:0}
.sheet-link{display:grid; grid-template-rows:auto 1fr}

/* ========== Badges ========== */
.badge{display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; font-size:.85rem; color:#fff}
.cat-tech{background:linear-gradient(135deg, var(--primary), var(--primary-2))}
.cat-business{background:linear-gradient(135deg, #22c55e, #16a34a)}
.cat-sport{background:linear-gradient(135deg, #f97316, #f59e0b)}
.cat-culture{background:linear-gradient(135deg, #a78bfa, #6366f1)}
.cat-science{background:linear-gradient(135deg, #06b6d4, #0ea5e9)}
.cat-life{background:linear-gradient(135deg, #ec4899, #ef4444)}

/* ========== Hero ========== */
.hero{padding:var(--s-4) 0 var(--s-2); background:linear-gradient(180deg, color-mix(in oklab, var(--elev) 60%, transparent), transparent)}
.hero-grid{display:grid; grid-template-columns:2fr 1fr; gap:var(--s-3); align-items:stretch}
.featured-main img{aspect-ratio:16/9; object-fit:cover}
.featured-side img{aspect-ratio:16/10; object-fit:cover}
.featured-main .title{font-size:clamp(22px,3.6vw,30px)}
.featured-side .title{font-size:1.05rem}
@media(max-width:980px){.hero-grid{grid-template-columns:1fr}}

/* ========== Headlines (below hero) ========== */
.headlines{padding:var(--s-2) 0 var(--s-4); border-top:1px solid var(--line); background:linear-gradient(180deg, transparent, color-mix(in oklab, var(--elev) 60%, transparent))}
.headlines-bar{display:flex; align-items:center; justify-content:space-between; gap:var(--s-2); margin-bottom:var(--s-2)}
.headlines h2{margin:0; font-size:1.1rem}
.controls{display:flex; gap:6px}
.hl-btn{width:34px; height:34px; border-radius:8px; border:1px solid var(--line); background:var(--surface); cursor:pointer}
.hl-track{display:flex; gap:var(--s-3); overflow:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; padding-bottom:6px}
.hl-slide{flex:0 0 82%; scroll-snap-align:start}
@media(min-width:900px){.hl-slide{flex:0 0 32%}}
.hl-slide img{aspect-ratio:16/9; object-fit:cover}
.hl-slide .info{padding:var(--s-3)}
.hl-slide b{display:block; margin-top:var(--s-2)}

/* ========== Main layout ========== */
.content-grid{display:grid; grid-template-columns:2fr 1fr; gap:var(--s-3)}
@media(max-width:980px){.content-grid{grid-template-columns:1fr}}

/* Sidebar */
.sidebar{display:grid; gap:var(--s-3)}
.hot h3,.newsletter h3,.tags h3{margin:0 0 var(--s-2)}
.hot-list{list-style:none; margin:0; padding:0; display:grid; gap:var(--s-2)}
.hot-list a{display:grid; grid-template-columns:100px 1fr; gap:var(--s-2); align-items:center}
.newsletter .form{display:flex; gap:var(--s-2)}
.input{flex:1; background:var(--elev); border:1px solid var(--line); color:var(--text); border-radius:10px; padding:10px}
.tag-cloud{display:flex; flex-wrap:wrap; gap:var(--s-2)}
.tag{display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px; background:var(--elev); border:1px solid var(--line); color:var(--muted)}
.tag:hover{color:var(--text)}

/* Buttons */
.btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid var(--line); cursor:pointer; transition:transform var(--speed-fast), background var(--speed), border-color var(--speed), color var(--speed); font-weight:700}
.btn:active{transform:translateY(1px)}
.btn-primary{background:linear-gradient(135deg, var(--primary), var(--primary-2)); color:#fff; border-color:transparent}
.btn-secondary{background:var(--elev); color:var(--text)}

/* Footer */
.footer{padding:var(--s-5) 0; background:var(--surface); border-top:1px solid var(--line)}
.footer .cols{display:grid; gap:var(--s-3)}
@media(min-width:760px){.footer .cols{grid-template-columns:2fr 1fr 1fr}}
.footer .logo{display:inline-flex; align-items:center; gap:8px; font-weight:800}
.footer .logo .mark{width:18px; height:18px; border-radius:5px; background:linear-gradient(135deg, var(--primary), var(--primary-2))}

/* Reveal (fallback-safe) */
[data-reveal]{opacity:1; transform:none}
.js [data-reveal]{opacity:0; transform:translateY(16px); transition:opacity var(--speed-slow) ease, transform var(--speed-slow) ease}
.reveal-in{opacity:1 !important; transform:translateY(0) !important}

/* Reduce motion */
@media(prefers-reduced-motion:reduce){ .sheet:hover{transform:none} }
/* Theme menu (fixed + viewport-safe) */
.theme-menu{
  position: fixed;        /* از هدر مستقل تا بیرون نپره */
  left: 0; top: 0;        /* مختصات با JS ست میشه */
  display: none;
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: 12px;
  box-shadow: var(--shadow-1);
  padding: 8px;
  min-width: 220px;
  width: max-content;
  max-width: min(calc(100vw - 16px), 320px); /* روی موبایل نمی‌زنه بیرون */
  max-height: min(60vh, 420px);
  overflow: auto;
  z-index: 1000;
}
.theme-menu.open{ display:block; animation:menu-pop .12s ease-out }
@keyframes menu-pop{ from{opacity:0; transform:scale(.98)} to{opacity:1; transform:scale(1)} }
/* Overlay پشت منو */
.nav-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  backdrop-filter:blur(2px);
  opacity:0; visibility:hidden; transition:opacity .2s ease; z-index:65;
}
body.nav-open .nav-overlay{ opacity:1; visibility:visible }
body.nav-open{ overflow:hidden } /* قفل اسکرول وقتی منو بازه */

/* Drawer موبایل (فقط زیر 980px) */
@media (max-width:980px){
  .primary-nav{
    position:fixed; top:0; inset-inline-end:0; bottom:0;
    width:min(320px, 84vw);
    background:color-mix(in oklab, var(--bg) 92%, transparent);
    border-inline-start:1px solid var(--line);
    display:flex; flex-direction:column; gap:8px;
    padding:16px; z-index:70;
    transform:translateX(110%); transition:transform 260ms ease;
    -webkit-overflow-scrolling:touch; overflow:auto;
  }
  body.nav-open .primary-nav{ transform:none }
  .primary-nav a{
    padding:10px 12px; border-radius:10px; color:var(--text);
    border:1px solid transparent;
  }
  .primary-nav a:hover, .primary-nav a:focus-visible{
    background:color-mix(in oklab, var(--elev) 60%, transparent);
    border-color:var(--line);
  }

  /* همبرگر با انیمیشن X */
  .hamburger{
    position:relative; width:40px; height:38px;
    background:transparent; border:1px solid var(--line);
    border-radius:10px; display:grid; place-items:center;
  }
  .hamburger span{
    position:absolute; width:20px; height:2px; background:var(--text);
    border-radius:2px; transition:transform .22s ease, opacity .22s ease;
  }
  .hamburger span:nth-child(1){ transform:translateY(-6px) }
  .hamburger span:nth-child(2){ transform:translateY(0) }
  .hamburger span:nth-child(3){ transform:translateY(6px) }
  .hamburger.is-open span:nth-child(1){ transform:rotate(45deg) }
  .hamburger.is-open span:nth-child(2){ opacity:0 }
  .hamburger.is-open span:nth-child(3){ transform:rotate(-45deg) }
}

/* دسکتاپ: منو همیشه اینلاین؛ همبرگر/اوورلی مخفی و بدون قفل اسکرول */
@media (min-width:981px){
  .hamburger{ display:none !important; }
  .primary-nav{
    display:flex !important; position:static !important; inset:auto !important;
    height:auto !important; width:auto !important; transform:none !important;
    background:transparent !important; border:0 !important; padding:0 !important;
  }
  #nav-overlay{ display:none !important; }
  body{ overflow:auto !important; }
}

/* فیکس‌های موبایل برای لی‌اوت مرتب‌تر */
@media (max-width:600px){
  .section{ padding:56px 0; }
  .hero{ padding:28px 0 8px; }
  .hero-grid, .content-grid{ grid-template-columns:1fr !important; }
  .featured-main img, .featured-side img,
  .hl-slide img, .post img{ aspect-ratio:16/9; object-fit:cover; }
  .grid.cards-3{ grid-template-columns:1fr !important; }
  .headlines .hl-track{ gap:12px; }
  .hl-slide{ flex:0 0 88%; }
}
/* Hamburger icon (SVG) */
.icon-btn{
  width:44px; height:44px; border-radius:12px;
  border:1px solid var(--line); background:var(--elev);
  display:grid; place-items:center; cursor:pointer;
  transition:transform .18s ease, background .2s ease, border-color .2s ease;
  -webkit-tap-highlight-color:transparent;
}
.icon-btn:hover{ transform:translateY(-1px); }
.icon-btn:focus-visible{ outline:3px solid color-mix(in oklab, var(--primary) 40%, transparent) }

.menu-icon{ width:24px; height:24px; display:block }
.menu-icon line{
  stroke:var(--text); stroke-width:2.2; stroke-linecap:round;
  transform-origin:12px 12px; transition:transform .22s ease, opacity .18s ease, stroke .2s ease;
  shape-rendering:geometricPrecision;
}
/* حالت بسته */
.hamburger .l1{ transform:translateY(-4px) }
.hamburger .l2{ transform:scaleX(1) }
.hamburger .l3{ transform:translateY(4px) }
/* حالت باز (به X) */
.hamburger.is-open .l1{ transform:rotate(45deg) }
.hamburger.is-open .l2{ opacity:0; transform:scaleX(.5) }
.hamburger.is-open .l3{ transform:rotate(-45deg) }
.hamburger.is-open .menu-icon line{ stroke:var(--primary) }

/* فقط موبایل: دسکتاپ مخفی بماند */
@media (min-width:981px){
  .hamburger{ display:none !important; }
}

/* کاهش حرکت: بدون انیمیشن */
@media (prefers-reduced-motion:reduce){
  .menu-icon line{ transition:none !important }
  .icon-btn{ transition:none !important }
}